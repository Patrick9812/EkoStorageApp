{% extends 'base.html.twig' %}

{% block title %}Wydanie Artykułu
{% endblock %}

{% block body %}
	<div class="flex items-center justify-center min-h-screen w-full bg-[#124278] pt-[80px] pb-[40px]">
		<div class="w-full max-w-xl p-8 bg-white rounded-3xl shadow-2xl border border-white/20">

			{% for message in app.flashes('error') %}
				<div class="mb-6 p-4 bg-red-50 border-l-4 border-red-500 text-red-500 rounded-xl flex items-center gap-3">
					{{ message }}
				</div>
			{% endfor %}

			<div class="flex items-center gap-4 mb-8">
				<div>
					<h1 class="text-3xl font-black text-slate-800">Wydanie Artykułu</h1>
				</div>
			</div>

			{{ form_start(form, {'attr': {'class': 'space-y-6', 'data-turbo': 'false'}}) }}

			<div>
				{{ form_label(form.article, 'Wybierz Artykuł', {'label_attr': {'class': 'block text-xs font-bold uppercase text-slate-500 mb-1'}}) }}
				{{ form_widget(form.article, {'attr': {'class': 'w-full px-4 py-4 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-green-500 transition-all text-lg font-medium'}}) }}
				{{ form_errors(form.article) }}
			</div>

			<div>
				{{ form_label(form.warehouse, 'Z magazynu', {'label_attr': {'class': 'block text-xs font-bold uppercase text-slate-500 mb-1'}}) }}
				{{ form_widget(form.warehouse, {'attr': {'class': 'w-full px-4 py-4 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-green-500 transition-all font-medium'}}) }}
				{{ form_errors(form.warehouse) }}
			</div>

			<div>
				{{ form_label(form.quantity, 'Ilość do wydania', {'label_attr': {'class': 'block text-xs font-bold uppercase text-slate-500 mb-1'}}) }}
				{{ form_widget(form.quantity, {'attr': {'class': 'w-full px-4 py-4 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-green-500 transition-all text-2xl font-black', 'placeholder': '0.000'}}) }}
				{{ form_errors(form.quantity) }}
			</div>

			<div class="bg-blue-50 border border-blue-100 p-4 rounded-2xl">
				<p class="text-xs text-blue-700 font-medium leading-relaxed italic">
					<span class="font-bold">Informacja:</span>
					System blokuje wydania powyżej aktualnego stanu magazynowego, aby uniknąć ujemnych wartości.
				</p>
			</div>

			<div class="pt-4">
				<button type="submit" class="w-full py-5 bg-[#16a603] hover:bg-[#0e6b02] text-white font-black rounded-xl shadow-lg shadow-green-200 transition-all active:scale-[0.98] uppercase tracking-widest text-lg">
					Zatwierdź Wydanie
				</button>

				<div class="text-center mt-6">
					{% set dash_path = is_granted('ROLE_ADMIN') ? 'app_admin_dashboard' : 'app_user_dashboard' %}
					<a href="{{ path(dash_path) }}" class="text-xs font-bold text-slate-400 uppercase tracking-widest hover:text-slate-600 transition-colors">
						Anuluj i wróć
					</a>
				</div>
			</div>

			{{ form_rest(form) }}
			{{ form_end(form) }}
		</div>
	</div>
{% endblock %}
