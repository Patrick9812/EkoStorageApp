{% extends 'base.html.twig' %}

{% block title %}Rejestracja Użytkownika
{% endblock %}

{% block body %}
	<div class="flex items-center justify-center min-h-screen w-full bg-[#124278] pt-[80px] pb-[40px]">
		<div class="w-full max-w-2xl p-8 bg-white rounded-2xl shadow-2xl border border-white/20">
			<h1 class="text-3xl font-black text-center text-slate-800 mb-2 tracking-tighter">
				Nowy Użytkownik
			</h1>
			<p class="text-center text-slate-500 text-sm mb-8 font-medium">Utwórz konto dla pracownika magazynu</p>

			{{ form_start(form, {'attr': {'class': 'grid grid-cols-1 md:grid-cols-2 gap-6'}}) }}

			<div class="space-y-4">
				<div>
					{{ form_label(form.username, 'Login', {'label_attr': {'class': 'block text-xs font-bold uppercase text-slate-500 mb-1'}}) }}
					{{ form_widget(form.username, {'attr': {'class': 'w-full px-4 py-2 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-indigo-500 transition-all', 'placeholder': 'np. jkowalski'}}) }}
				</div>
				<div>
					{{ form_label(form.fullname, 'Imię i Nazwisko', {'label_attr': {'class': 'block text-xs font-bold uppercase text-slate-500 mb-1'}}) }}
					{{ form_widget(form.fullname, {'attr': {'class': 'w-full px-4 py-2 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-indigo-500 transition-all', 'placeholder': 'np. Jan Kowalski'}}) }}
				</div>
				<div>
					{{ form_label(form.password.first, 'Hasło', {'label_attr': {'class': 'block text-xs font-bold uppercase text-slate-500 mb-1'}}) }}
					{{ form_widget(form.password.first, {'attr': {'class': 'w-full px-4 py-2 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-indigo-500 transition-all'}}) }}
				</div>
				<div>
					{{ form_label(form.password.second, 'Powtórz hasło', {'label_attr': {'class': 'block text-xs font-bold uppercase text-slate-500 mb-1'}}) }}
					{{ form_widget(form.password.second, {'attr': {'class': 'w-full px-4 py-2 rounded-xl bg-slate-50 border border-slate-200 focus:ring-2 focus:ring-indigo-500 transition-all'}}) }}
				</div>
			</div>

			<div class="space-y-4">
				<div>
					{{ form_label(form.roles, 'Uprawnienia', {'label_attr': {'class': 'block text-xs font-bold uppercase text-slate-500 mb-1'}}) }}
					<div class="p-3 bg-slate-50 border border-slate-200 rounded-xl space-y-2">
						{% for child in form.roles %}
							<label class="flex items-center gap-2 text-sm text-slate-700 cursor-pointer group">
								{{ form_widget(child, {'attr': {'class': 'rounded text-green-600 focus:ring-green-500'}}) }}
								<span class="group-hover:text-green-700 transition-colors">{{ child.vars.label }}</span>
							</label>
						{% endfor %}
					</div>
				</div>

				<div>
					{{ form_label(form.warehouses, 'Dostęp do magazynów', {'label_attr': {'class': 'block text-xs font-bold uppercase text-slate-500 mb-1'}}) }}
					<div class="max-h-[120px] overflow-y-auto p-3 bg-slate-50 border border-slate-200 rounded-xl space-y-2">
						{% for child in form.warehouses %}
							<label class="flex items-center gap-2 text-sm text-slate-700 cursor-pointer group">
								{{ form_widget(child, {'attr': {'class': 'rounded text-green-600 focus:ring-green-500'}}) }}
								<span class="group-hover:text-green-700 transition-colors">{{ child.vars.label }}</span>
							</label>
						{% else %}
							<div class="py-2 text-center">
								<p class="text-xs text-slate-400">Brak zdefiniowanych magazynów.</p>
								<a href="{{ path('app_admin_create_storage') }}" class="text-[12px] text-black-500 hover:underline font-bold uppercase mt-1 block">
									Dodaj pierwszy magazyn
								</a>
							</div>
						{% endfor %}
					</div>
				</div>
			</div>

			<div class="md:col-span-2 pt-4">
				{{ form_widget(form.submit, {
                        'label': 'Zarejestruj użytkownika',
                        'attr': {'class': 'w-full py-4 bg-[#16a603] hover:bg-[#0e6b02] text-white font-bold rounded-xl shadow-lg shadow-green-200 transition-all active:scale-[0.98]'}
                    }) }}
				<div class="text-center mt-4">
					<a href="{{ path('app_admin_dashboard') }}" class="text-xs font-bold text-slate-400 uppercase tracking-widest hover:text-slate-600 transition-colors">
						Powrót do panelu
					</a>
				</div>
			</div>

			{{ form_end(form, {render_rest: false}) }}
		</div>
	</div>
{% endblock %}
